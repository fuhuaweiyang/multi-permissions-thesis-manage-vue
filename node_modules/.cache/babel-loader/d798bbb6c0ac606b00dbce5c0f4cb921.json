{"remainingRequest":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\scoremanagement\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\scoremanagement\\Detail.vue","mtime":1743880105171},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\babel.config.js","mtime":1711182475899},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1711182482575},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzpcXFVzZXJzXFwxODEzM1xcRGVza3RvcFxcXHU1NzI4XHU3RUJGXHU1QjY2XHU0RTYwXHU3Q0ZCXHU3RURGXFxcdTZFOTBcdTc4MDFcXE9ubGluZUxlYXJuVnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxvYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFydGljbGVDb250ZW50OiAiXHU4RkQ5XHU5MUNDXHU2NjJGXHU0RTAwXHU3QkM3XHU3OTNBXHU0RjhCXHU2NTg3XHU3QUUwXHU1MTg1XHU1QkI5XHVGRjBDXHU1MzA1XHU1NDJCXHU1OTFBXHU0RTJBXHU2QkI1XHU4NDNEXHUzMDAyXHU2NTU5XHU1RTA4XHU1M0VGXHU0RUU1XHU5MDA5XHU0RTJEXHU0RUZCXHU2MTBGXHU2NTg3XHU2NzJDXHU3MjQ3XHU2QkI1XHU4RkRCXHU4ODRDXHU2Mjc5XHU2Q0U4XHUzMDAyXG4gICAgICAgIFx1NjI3OVx1NkNFOFx1NTI5Rlx1ODBGRFx1OTcwMFx1ODk4MVx1NTFDNlx1Nzg2RVx1OEJCMFx1NUY1NVx1OTAwOVx1NEUyRFx1NjU4N1x1NjcyQ1x1NzY4NFx1NEY0RFx1N0Y2RVx1NTQ4Q1x1NTE4NVx1NUJCOVx1RkYwQ1x1NUU3Nlx1NjUyRlx1NjMwMVx1NTQwRVx1N0VFRFx1NzY4NFx1NUM1NVx1NzkzQVx1NTQ4Q1x1OEZEOFx1NTM5Rlx1MzAwMiIsCiAgICAgIGFubm90YXRpb25zOiBbXSwKICAgICAgc2VsZWN0ZWRUZXh0OiAnJywKICAgICAgc2VsZWN0ZWRSYW5nZTogbnVsbCwKICAgICAgc2hvd0NvbW1lbnRJbnB1dDogZmFsc2UsCiAgICAgIGNvbW1lbnRJbnB1dDogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g55Sf5oiQ5YyF5ZCr5om55rOo5qCH6K6w55qE5YaF5a65CiAgICBhbm5vdGF0ZWRDb250ZW50OiBmdW5jdGlvbiBhbm5vdGF0ZWRDb250ZW50KCkgewogICAgICB2YXIgY29udGVudCA9IHRoaXMuYXJ0aWNsZUNvbnRlbnQ7CiAgICAgIHRoaXMuYW5ub3RhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYW5ubykgewogICAgICAgIHZhciBoaWdobGlnaHQgPSAiPHNwYW4gY2xhc3M9XCJoaWdobGlnaHRcIiBkYXRhLWlkPVwiIi5jb25jYXQoYW5uby5pZCwgIlwiPiIpLmNvbmNhdChhbm5vLnNlbGVjdGVkVGV4dCwgIjwvc3Bhbj4iKTsKICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKGFubm8uc2VsZWN0ZWRUZXh0LCBoaWdobGlnaHQpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICB9LAogICAgLy8g5bqP5YiX5YyW5om55rOo5L+h5oGvCiAgICBzZXJpYWxpemVkQW5ub3RhdGlvbnM6IGZ1bmN0aW9uIHNlcmlhbGl6ZWRBbm5vdGF0aW9ucygpIHsKICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuYW5ub3RhdGlvbnMpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlVGV4dFNlbGVjdGlvbjogZnVuY3Rpb24gaGFuZGxlVGV4dFNlbGVjdGlvbigpIHsKICAgICAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgaWYgKCFzZWxlY3Rpb24ucmFuZ2VDb3VudCkgcmV0dXJuOwogICAgICB2YXIgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTsKICAgICAgdmFyIHNlbGVjdGVkVGV4dCA9IHJhbmdlLnRvU3RyaW5nKCkudHJpbSgpOwoKICAgICAgaWYgKHNlbGVjdGVkVGV4dCkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRUZXh0ID0gc2VsZWN0ZWRUZXh0OwogICAgICAgIHRoaXMuc2VsZWN0ZWRSYW5nZSA9IHJhbmdlOwogICAgICAgIHRoaXMuc2hvd0NvbW1lbnRJbnB1dCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlQW5ub3RhdGlvbjogZnVuY3Rpb24gc2F2ZUFubm90YXRpb24oKSB7CiAgICAgIGlmICghdGhpcy5jb21tZW50SW5wdXQpIHJldHVybjsKICAgICAgdmFyIG5ld0Fubm90YXRpb24gPSB7CiAgICAgICAgaWQ6IERhdGUubm93KCksCiAgICAgICAgc2VsZWN0ZWRUZXh0OiB0aGlzLnNlbGVjdGVkVGV4dCwKICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnRJbnB1dCwKICAgICAgICBzdGFydE9mZnNldDogdGhpcy5zZWxlY3RlZFJhbmdlLnN0YXJ0T2Zmc2V0LAogICAgICAgIGVuZE9mZnNldDogdGhpcy5zZWxlY3RlZFJhbmdlLmVuZE9mZnNldCwKICAgICAgICBzdGFydENvbnRhaW5lclBhdGg6IHRoaXMuZ2V0Tm9kZVBhdGgodGhpcy5zZWxlY3RlZFJhbmdlLnN0YXJ0Q29udGFpbmVyKSwKICAgICAgICBlbmRDb250YWluZXJQYXRoOiB0aGlzLmdldE5vZGVQYXRoKHRoaXMuc2VsZWN0ZWRSYW5nZS5lbmRDb250YWluZXIpCiAgICAgIH07CiAgICAgIHRoaXMuYW5ub3RhdGlvbnMucHVzaChuZXdBbm5vdGF0aW9uKTsKICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpOwogICAgfSwKICAgIGNhbmNlbEFubm90YXRpb246IGZ1bmN0aW9uIGNhbmNlbEFubm90YXRpb24oKSB7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTsKICAgIH0sCiAgICBjbGVhclNlbGVjdGlvbjogZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb24oKSB7CiAgICAgIHRoaXMuc2hvd0NvbW1lbnRJbnB1dCA9IGZhbHNlOwogICAgICB0aGlzLmNvbW1lbnRJbnB1dCA9ICcnOwogICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7CiAgICB9LAogICAgLy8g5bCGRE9N6IqC54K56Lev5b6E6L2s5o2i5Li65Y+v5bqP5YiX5YyW55qE6Lev5b6ECiAgICBnZXROb2RlUGF0aDogZnVuY3Rpb24gZ2V0Tm9kZVBhdGgobm9kZSkgewogICAgICB2YXIgcGF0aCA9IFtdOwoKICAgICAgd2hpbGUgKG5vZGUucGFyZW50Tm9kZSkgewogICAgICAgIHBhdGgucHVzaChBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKG5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzLCBub2RlKSk7CiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9LAogICAgLy8g5LuO5bqP5YiX5YyW5a2X56ym5Liy5Yqg6L295om55rOoCiAgICBsb2FkQW5ub3RhdGlvbnM6IGZ1bmN0aW9uIGxvYWRBbm5vdGF0aW9ucyhzZXJpYWxpemVkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0cnkgewogICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBKU09OLnBhcnNlKHNlcmlhbGl6ZWQpLm1hcChmdW5jdGlvbiAoYW5ubykgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYW5ubyksIHt9LCB7CiAgICAgICAgICAgIHJhbmdlOiBfdGhpcy5yZXN0b3JlUmFuZ2UoYW5ubykKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q5om55rOo5aSx6LSlOicsIGUpOwogICAgICB9CiAgICB9LAogICAgLy8g6L+Y5Y6fUmFuZ2Xlr7nosaEKICAgIHJlc3RvcmVSYW5nZTogZnVuY3Rpb24gcmVzdG9yZVJhbmdlKGFubm90YXRpb24pIHsKICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgdmFyIHN0YXJ0Tm9kZSA9IGRvY3VtZW50LmJvZHk7CiAgICAgIGFubm90YXRpb24uc3RhcnRDb250YWluZXJQYXRoLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChpbmRleCkgewogICAgICAgIHN0YXJ0Tm9kZSA9IHN0YXJ0Tm9kZS5jaGlsZE5vZGVzW2luZGV4XTsKICAgICAgfSk7CiAgICAgIHZhciBlbmROb2RlID0gZG9jdW1lbnQuYm9keTsKICAgICAgYW5ub3RhdGlvbi5lbmRDb250YWluZXJQYXRoLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChpbmRleCkgewogICAgICAgIGVuZE5vZGUgPSBlbmROb2RlLmNoaWxkTm9kZXNbaW5kZXhdOwogICAgICB9KTsKICAgICAgcmFuZ2Uuc2V0U3RhcnQoc3RhcnROb2RlLCBhbm5vdGF0aW9uLnN0YXJ0T2Zmc2V0KTsKICAgICAgcmFuZ2Uuc2V0RW5kKGVuZE5vZGUsIGFubm90YXRpb24uZW5kT2Zmc2V0KTsKICAgICAgcmV0dXJuIHJhbmdlOwogICAgfSwKICAgIHNjcm9sbFRvQW5ub3RhdGlvbjogZnVuY3Rpb24gc2Nyb2xsVG9Bbm5vdGF0aW9uKGFubm90YXRpb24pIHsKICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1pZD1cIiIuY29uY2F0KGFubm90YXRpb24uaWQsICJcIl0iKSk7CgogICAgICBpZiAoZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoewogICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,cAAA,4aADA;AAGA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA,IALA;AAMA,MAAA,gBAAA,EAAA,KANA;AAOA,MAAA,YAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAaA,EAAA,QAAA,EAAA;AACA;AACA,IAAA,gBAFA,8BAEA;AACA,UAAA,OAAA,GAAA,KAAA,cAAA;AACA,WAAA,WAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,SAAA,iDAAA,IAAA,CAAA,EAAA,gBAAA,IAAA,CAAA,YAAA,YAAA;AACA,QAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA,IAAA,CAAA,YAAA,EAAA,SAAA,CAAA;AACA,OAHA;AAIA,aAAA,OAAA;AACA,KATA;AAWA;AACA,IAAA,qBAZA,mCAYA;AACA,aAAA,IAAA,CAAA,SAAA,CAAA,KAAA,WAAA,CAAA;AACA;AAdA,GAbA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,iCACA;AACA,UAAA,SAAA,GAAA,MAAA,CAAA,YAAA,EAAA;AACA,UAAA,CAAA,SAAA,CAAA,UAAA,EAAA;AAEA,UAAA,KAAA,GAAA,SAAA,CAAA,UAAA,CAAA,CAAA,CAAA;AACA,UAAA,YAAA,GAAA,KAAA,CAAA,QAAA,GAAA,IAAA,EAAA;;AAEA,UAAA,YAAA,EAAA;AACA,aAAA,YAAA,GAAA,YAAA;AACA,aAAA,aAAA,GAAA,KAAA;AACA,aAAA,gBAAA,GAAA,IAAA;AACA;AACA,KAbA;AAeA,IAAA,cAfA,4BAeA;AACA,UAAA,CAAA,KAAA,YAAA,EAAA;AAEA,UAAA,aAAA,GAAA;AACA,QAAA,EAAA,EAAA,IAAA,CAAA,GAAA,EADA;AAEA,QAAA,YAAA,EAAA,KAAA,YAFA;AAGA,QAAA,OAAA,EAAA,KAAA,YAHA;AAIA,QAAA,WAAA,EAAA,KAAA,aAAA,CAAA,WAJA;AAKA,QAAA,SAAA,EAAA,KAAA,aAAA,CAAA,SALA;AAMA,QAAA,kBAAA,EAAA,KAAA,WAAA,CAAA,KAAA,aAAA,CAAA,cAAA,CANA;AAOA,QAAA,gBAAA,EAAA,KAAA,WAAA,CAAA,KAAA,aAAA,CAAA,YAAA;AAPA,OAAA;AAUA,WAAA,WAAA,CAAA,IAAA,CAAA,aAAA;AACA,WAAA,cAAA;AACA,KA9BA;AAgCA,IAAA,gBAhCA,8BAgCA;AACA,WAAA,cAAA;AACA,KAlCA;AAoCA,IAAA,cApCA,4BAoCA;AACA,WAAA,gBAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,YAAA,GAAA,eAAA;AACA,KAxCA;AA0CA;AACA,IAAA,WA3CA,uBA2CA,IA3CA,EA2CA;AACA,UAAA,IAAA,GAAA,EAAA;;AACA,aAAA,IAAA,CAAA,UAAA,EAAA;AACA,QAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA,CAAA,UAAA,EAAA,IAAA,CAAA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,UAAA;AACA;;AACA,aAAA,IAAA;AACA,KAlDA;AAoDA;AACA,IAAA,eArDA,2BAqDA,UArDA,EAqDA;AAAA;;AACA,UAAA;AACA,aAAA,WAAA,GAAA,IAAA,CAAA,KAAA,CAAA,UAAA,EAAA,GAAA,CAAA,UAAA,IAAA;AAAA,iDACA,IADA;AAEA,YAAA,KAAA,EAAA,KAAA,CAAA,YAAA,CAAA,IAAA;AAFA;AAAA,SAAA,CAAA;AAIA,OALA,CAKA,OAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,SAAA,EAAA,CAAA;AACA;AACA,KA9DA;AAgEA;AACA,IAAA,YAjEA,wBAiEA,UAjEA,EAiEA;AACA,UAAA,KAAA,GAAA,QAAA,CAAA,WAAA,EAAA;AAEA,UAAA,SAAA,GAAA,QAAA,CAAA,IAAA;AACA,MAAA,UAAA,CAAA,kBAAA,CAAA,OAAA,GAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,SAAA,GAAA,SAAA,CAAA,UAAA,CAAA,KAAA,CAAA;AACA,OAFA;AAIA,UAAA,OAAA,GAAA,QAAA,CAAA,IAAA;AACA,MAAA,UAAA,CAAA,gBAAA,CAAA,OAAA,GAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA,KAAA,CAAA;AACA,OAFA;AAIA,MAAA,KAAA,CAAA,QAAA,CAAA,SAAA,EAAA,UAAA,CAAA,WAAA;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,OAAA,EAAA,UAAA,CAAA,SAAA;AACA,aAAA,KAAA;AACA,KAjFA;AAmFA,IAAA,kBAnFA,8BAmFA,UAnFA,EAmFA;AACA,UAAA,OAAA,GAAA,QAAA,CAAA,aAAA,sBAAA,UAAA,CAAA,EAAA,SAAA;;AACA,UAAA,OAAA,EAAA;AACA,QAAA,OAAA,CAAA,cAAA,CAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA;AACA;AACA;AAxFA;AA9BA,CAAA","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n      <!-- 文章内容区域 -->\r\n      <div \r\n        class=\"article-content\"\r\n        @mouseup=\"handleTextSelection\"\r\n        v-html=\"annotatedContent\"\r\n      ></div>\r\n  \r\n      <!-- 批注输入弹窗 -->\r\n      <div v-if=\"showCommentInput\" class=\"annotation-modal\">\r\n        <div class=\"selected-text\">选中的文本：{{ selectedText }}</div>\r\n        <textarea v-model=\"commentInput\" placeholder=\"请输入批注内容\"></textarea>\r\n        <button @click=\"saveAnnotation\">保存批注</button>\r\n        <button @click=\"cancelAnnotation\">取消</button>\r\n      </div>\r\n  \r\n      <!-- 批注展示 -->\r\n      <div class=\"annotations-list\">\r\n        <div v-for=\"(annotation, index) in annotations\" :key=\"index\" class=\"annotation-item\">\r\n          <span class=\"highlight\" @click=\"scrollToAnnotation(annotation)\">\r\n            {{ annotation.selectedText }}\r\n          </span>\r\n          <div class=\"comment\">{{ annotation.comment }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        articleContent: `这里是一篇示例文章内容，包含多个段落。教师可以选中任意文本片段进行批注。\r\n          批注功能需要准确记录选中文本的位置和内容，并支持后续的展示和还原。`,\r\n        annotations: [],\r\n        selectedText: '',\r\n        selectedRange: null,\r\n        showCommentInput: false,\r\n        commentInput: ''\r\n      };\r\n    },\r\n  \r\n    computed: {\r\n      // 生成包含批注标记的内容\r\n      annotatedContent() {\r\n        let content = this.articleContent;\r\n        this.annotations.forEach(anno => {\r\n          const highlight = `<span class=\"highlight\" data-id=\"${anno.id}\">${anno.selectedText}</span>`;\r\n          content = content.replace(anno.selectedText, highlight);\r\n        });\r\n        return content;\r\n      },\r\n  \r\n      // 序列化批注信息\r\n      serializedAnnotations() {\r\n        return JSON.stringify(this.annotations);\r\n      }\r\n    },\r\n  \r\n    methods: {\r\n      handleTextSelection() {\r\n        const selection = window.getSelection();\r\n        if (!selection.rangeCount) return;\r\n  \r\n        const range = selection.getRangeAt(0);\r\n        const selectedText = range.toString().trim();\r\n  \r\n        if (selectedText) {\r\n          this.selectedText = selectedText;\r\n          this.selectedRange = range;\r\n          this.showCommentInput = true;\r\n        }\r\n      },\r\n  \r\n      saveAnnotation() {\r\n        if (!this.commentInput) return;\r\n  \r\n        const newAnnotation = {\r\n          id: Date.now(),\r\n          selectedText: this.selectedText,\r\n          comment: this.commentInput,\r\n          startOffset: this.selectedRange.startOffset,\r\n          endOffset: this.selectedRange.endOffset,\r\n          startContainerPath: this.getNodePath(this.selectedRange.startContainer),\r\n          endContainerPath: this.getNodePath(this.selectedRange.endContainer)\r\n        };\r\n  \r\n        this.annotations.push(newAnnotation);\r\n        this.clearSelection();\r\n      },\r\n  \r\n      cancelAnnotation() {\r\n        this.clearSelection();\r\n      },\r\n  \r\n      clearSelection() {\r\n        this.showCommentInput = false;\r\n        this.commentInput = '';\r\n        window.getSelection().removeAllRanges();\r\n      },\r\n  \r\n      // 将DOM节点路径转换为可序列化的路径\r\n      getNodePath(node) {\r\n        const path = [];\r\n        while (node.parentNode) {\r\n          path.push(Array.prototype.indexOf.call(node.parentNode.childNodes, node));\r\n          node = node.parentNode;\r\n        }\r\n        return path;\r\n      },\r\n  \r\n      // 从序列化字符串加载批注\r\n      loadAnnotations(serialized) {\r\n        try {\r\n          this.annotations = JSON.parse(serialized).map(anno => ({\r\n            ...anno,\r\n            range: this.restoreRange(anno)\r\n          }));\r\n        } catch (e) {\r\n          console.error('解析批注失败:', e);\r\n        }\r\n      },\r\n  \r\n      // 还原Range对象\r\n      restoreRange(annotation) {\r\n        const range = document.createRange();\r\n        \r\n        let startNode = document.body;\r\n        annotation.startContainerPath.reverse().forEach(index => {\r\n          startNode = startNode.childNodes[index];\r\n        });\r\n  \r\n        let endNode = document.body;\r\n        annotation.endContainerPath.reverse().forEach(index => {\r\n          endNode = endNode.childNodes[index];\r\n        });\r\n  \r\n        range.setStart(startNode, annotation.startOffset);\r\n        range.setEnd(endNode, annotation.endOffset);\r\n        return range;\r\n      },\r\n  \r\n      scrollToAnnotation(annotation) {\r\n        const element = document.querySelector(`[data-id=\"${annotation.id}\"]`);\r\n        if (element) {\r\n          element.scrollIntoView({ behavior: 'smooth' });\r\n        }\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  .container {\r\n    display: flex;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .article-content {\r\n    flex: 2;\r\n    padding: 20px;\r\n    line-height: 1.6;\r\n    border-right: 1px solid #ccc;\r\n  }\r\n  \r\n  .annotations-list {\r\n    flex: 1;\r\n    padding: 20px;\r\n  }\r\n  \r\n  .highlight {\r\n    background-color: #ffeb3b;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  .annotation-modal {\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background: white;\r\n    padding: 20px;\r\n    border: 1px solid #ccc;\r\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n    z-index: 1000;\r\n  }\r\n  \r\n  .annotation-item {\r\n    margin-bottom: 15px;\r\n    padding: 10px;\r\n    border: 1px solid #eee;\r\n  }\r\n  </style>"],"sourceRoot":"src/views/scoremanagement"}]}