{"remainingRequest":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\student\\practice\\ModificationList.vue?vue&type=style&index=0&id=1f6edc50&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\student\\practice\\ModificationList.vue","mtime":1744204518732},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1711182487975},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1711182506221},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1711182496599},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC1wYWdpbmF0aW9uIHsNCiAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7DQp9DQo="},{"version":3,"sources":["ModificationList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA","file":"ModificationList.vue","sourceRoot":"src/views/student/practice","sourcesContent":["<template>\r\n    <div style=\"padding: 10px;\">\r\n        <el-table :data=\"modificationList\" style=\"width: 100%\">\r\n            <el-table-column prop=\"modificationTime\" label=\"修改时间\" width=\"180\" />\r\n            <el-table-column prop=\"id\" label=\"论文ID\" width=\"180\" />\r\n            <el-table-column prop=\"teacherId\" label=\"指导教师\" />\r\n            <el-table-column label=\"修改内容\">\r\n                <template slot-scope=\"scope\">\r\n                    {{ scope.row.modificationWhat || '无修改内容' }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button @click=\"handleDetail(scope.row)\" type=\"primary\" size=\"small\">\r\n                        详情\r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pagination.page\"\r\n            :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pagination.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"pagination.total\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport default {\r\n    name: \"ModificationHistory\",\r\n    data() {\r\n        return {\r\n            modificationList: [],  // 修改后的数据列表\r\n            pagination: {         // 分页对象\r\n                page: 1,\r\n                pageSize: 10,\r\n                total: 0\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        this.loadData();\r\n    },\r\n    methods: {\r\n        // 加载数据\r\n        async loadData() {\r\n            try {\r\n                const response = await axios.post(\r\n                    'http://localhost:9251/api/modification/getModification',\r\n                    {\r\n                        stuId: Number(Cookies.get('userId')),\r\n                        page: this.pagination.page,\r\n                        pageSize: this.pagination.pageSize\r\n                    },\r\n                    {\r\n                        headers: { 'Content-Type': 'application/json' }\r\n                    }\r\n                );\r\n                console.log({\r\n                        stuId: Number(Cookies.get('userId')),\r\n                        page: this.pagination.page,\r\n                        pageSize: this.pagination.pageSize\r\n                    })\r\n                console.log(response);\r\n                this.modificationList = response.data || [];\r\n                // this.pagination.total = response.data.data.total || 0;\r\n            } catch (error) {\r\n                console.error('请求异常:', error);\r\n                this.$message.error('数据加载失败');\r\n            }\r\n        },\r\n\r\n        // 查看详情\r\n        handleDetail(row) {\r\n            console.log(row);\r\n            localStorage.setItem('modification', JSON.stringify(row));\r\n            this.$router.push({\r\n                name: 'ModificationCompare',\r\n            });\r\n        },\r\n\r\n        // 分页大小改变\r\n        handleSizeChange(newSize) {\r\n            this.pagination.pageSize = newSize;\r\n            this.pagination.page = 1;  // 重置到第一页\r\n            this.loadData();\r\n        },\r\n\r\n        // 页码改变\r\n        handleCurrentChange(newPage) {\r\n            this.pagination.page = newPage;\r\n            this.loadData();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-pagination {\r\n    margin-top: 20px;\r\n    justify-content: flex-end;\r\n}\r\n</style>"]}]}