{"remainingRequest":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\student\\practice\\ModificationList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\student\\practice\\ModificationList.vue","mtime":1746377965814},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1711182482575},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJNb2RpZmljYXRpb25IaXN0b3J5IiwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbW9kaWZpY2F0aW9uTGlzdDogW10sICAvLyDkv67mlLnlkI7nmoTmlbDmja7liJfooagNCiAgICAgICAgICAgIHBhZ2luYXRpb246IHsgICAgICAgICAvLyDliIbpobXlr7nosaENCiAgICAgICAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgICAgICAgICB0b3RhbDogMA0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5sb2FkRGF0YSgpOw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAvLyDliqDovb3mlbDmja4NCiAgICAgICAgYXN5bmMgbG9hZERhdGEoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgNCiAgICAgICAgICAgICAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTI1MS9hcGkvbW9kaWZpY2F0aW9uL2dldE1vZGlmaWNhdGlvbicsDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0dUlkOiBOdW1iZXIoQ29va2llcy5nZXQoJ3VzZXJJZCcpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnaW5hdGlvbi5wYWdlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnaW5hdGlvbi5wYWdlU2l6ZQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh7DQogICAgICAgICAgICAgICAgICAgIHN0dUlkOiBOdW1iZXIoQ29va2llcy5nZXQoJ3VzZXJJZCcpKSwNCiAgICAgICAgICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdpbmF0aW9uLnBhZ2UsDQogICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2luYXRpb24ucGFnZVNpemUNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICB0aGlzLm1vZGlmaWNhdGlvbkxpc3QgPSByZXNwb25zZS5kYXRhIHx8IFtdOw0KICAgICAgICAgICAgICAgIC8vIHRoaXMucGFnaW5hdGlvbi50b3RhbCA9IHJlc3BvbnNlLmRhdGEuZGF0YS50b3RhbCB8fCAwOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfor7fmsYLlvILluLg6JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aVsOaNruWKoOi9veWksei0pScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIC8vIOafpeeci+ivpuaDhQ0KICAgICAgICBoYW5kbGVEZXRhaWwocm93KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygn5b2T5YmN6KGM5pWw5o2u77yaJywgcm93KTsNCg0KICAgICAgICAgICAgLy8g5ZyoIG1vZGlmaWNhdGlvbkxpc3Qg5Lit5p+l5om+5b2T5YmN6KGM5omA5Zyo57Si5byVDQogICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLm1vZGlmaWNhdGlvbkxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gcm93LmlkKTsNCg0KICAgICAgICAgICAgLy8g6K6h566X5YmN5LiA5Liq5YWD57Sg55qE57Si5byVDQogICAgICAgICAgICBjb25zdCBwcmV2SWR4ID0gaWR4ID4gMCA/IGlkeCAtIDEgOiAtMTsNCg0KICAgICAgICAgICAgLy8g5a2Y5Zyo5YmN5LiA5Liq5YWD57Sg77yM5YiZ5Y+W5Ye65bm25L+d5a2YDQogICAgICAgICAgICBjb25zdCBwcmV2Um93ID0gdGhpcy5tb2RpZmljYXRpb25MaXN0W3ByZXZJZHhdOw0KICAgICAgICAgICAgY29uc29sZS5sb2coJ+WJjeS4gOS4quWFg+e0oO+8micsIHByZXZSb3cpOw0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3ByZXZNb2RpZmljYXRpb24nLCBKU09OLnN0cmluZ2lmeShwcmV2Um93KSk7DQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbW9kaWZpY2F0aW9uJywgSlNPTi5zdHJpbmdpZnkocm93KSk7DQogICAgICAgICAgICAvLyDot7PovazliLDlr7nmr5TpobXpnaINCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgICBuYW1lOiAnTW9kaWZpY2F0aW9uQ29tcGFyZScsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvLyDliIbpobXlpKflsI/mlLnlj5gNCiAgICAgICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7DQogICAgICAgICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZVNpemUgPSBuZXdTaXplOw0KICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2UgPSAxOyAgLy8g6YeN572u5Yiw56ys5LiA6aG1DQogICAgICAgICAgICB0aGlzLmxvYWREYXRhKCk7DQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g6aG156CB5pS55Y+YDQogICAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgew0KICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2UgPSBuZXdQYWdlOw0KICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSgpOw0KICAgICAgICB9DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["ModificationList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModificationList.vue","sourceRoot":"src/views/student/practice","sourcesContent":["<template>\r\n    <div style=\"padding: 10px;\">\r\n        <el-table :data=\"modificationList\" style=\"width: 100%\">\r\n            <el-table-column prop=\"modificationTime\" label=\"修改时间\" width=\"180\" />\r\n            <el-table-column prop=\"id\" label=\"论文ID\" width=\"180\" />\r\n            <el-table-column prop=\"teacherId\" label=\"指导教师\" />\r\n            <el-table-column label=\"修改内容\">\r\n                <template slot-scope=\"scope\">\r\n                    {{ scope.row.modificationWhat || '无修改内容' }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button @click=\"handleDetail(scope.row)\" type=\"primary\" size=\"small\">\r\n                        详情\r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pagination.page\"\r\n            :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pagination.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"pagination.total\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport default {\r\n    name: \"ModificationHistory\",\r\n    data() {\r\n        return {\r\n            modificationList: [],  // 修改后的数据列表\r\n            pagination: {         // 分页对象\r\n                page: 1,\r\n                pageSize: 10,\r\n                total: 0\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        this.loadData();\r\n    },\r\n    methods: {\r\n        // 加载数据\r\n        async loadData() {\r\n            try {\r\n                const response = await axios.post(\r\n                    'http://localhost:9251/api/modification/getModification',\r\n                    {\r\n                        stuId: Number(Cookies.get('userId')),\r\n                        page: this.pagination.page,\r\n                        pageSize: this.pagination.pageSize\r\n                    },\r\n                    {\r\n                        headers: { 'Content-Type': 'application/json' }\r\n                    }\r\n                );\r\n                console.log({\r\n                    stuId: Number(Cookies.get('userId')),\r\n                    page: this.pagination.page,\r\n                    pageSize: this.pagination.pageSize\r\n                })\r\n                console.log(response);\r\n                this.modificationList = response.data || [];\r\n                // this.pagination.total = response.data.data.total || 0;\r\n            } catch (error) {\r\n                console.error('请求异常:', error);\r\n                this.$message.error('数据加载失败');\r\n            }\r\n        },\r\n\r\n        // 查看详情\r\n        handleDetail(row) {\r\n            console.log('当前行数据：', row);\r\n\r\n            // 在 modificationList 中查找当前行所在索引\r\n            const idx = this.modificationList.findIndex(item => item.id === row.id);\r\n\r\n            // 计算前一个元素的索引\r\n            const prevIdx = idx > 0 ? idx - 1 : -1;\r\n\r\n            // 存在前一个元素，则取出并保存\r\n            const prevRow = this.modificationList[prevIdx];\r\n            console.log('前一个元素：', prevRow);\r\n            localStorage.setItem('prevModification', JSON.stringify(prevRow));\r\n            localStorage.setItem('modification', JSON.stringify(row));\r\n            // 跳转到对比页面\r\n            this.$router.push({\r\n                name: 'ModificationCompare',\r\n            });\r\n        },\r\n\r\n        // 分页大小改变\r\n        handleSizeChange(newSize) {\r\n            this.pagination.pageSize = newSize;\r\n            this.pagination.page = 1;  // 重置到第一页\r\n            this.loadData();\r\n        },\r\n\r\n        // 页码改变\r\n        handleCurrentChange(newPage) {\r\n            this.pagination.page = newPage;\r\n            this.loadData();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-pagination {\r\n    margin-top: 20px;\r\n    justify-content: flex-end;\r\n}\r\n</style>"]}]}