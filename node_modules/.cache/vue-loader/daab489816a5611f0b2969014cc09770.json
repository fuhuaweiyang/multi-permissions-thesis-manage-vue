{"remainingRequest":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\studentweb\\practice\\ModificationCompare.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\studentweb\\practice\\ModificationCompare.vue","mtime":1743855704883},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1711182482575},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkaWZmX21hdGNoX3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vYXBpL2RpZmZfbWF0Y2hfcGF0Y2gnDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRtcDogbmV3IGRpZmZfbWF0Y2hfcGF0Y2goKSwNCiAgICAgICAgICAgIG9sZFRleHQ6ICfljp/lp4vmlofmnKzlhoXlrrlcbuesrOS6jOihjOWOn+Wni+WGheWuuVxu56ys5LiJ6KGM5Y6f5aeL5YaF5a65JywNCiAgICAgICAgICAgIHBhdGNoVGV4dDogJ0BAIC0xLDMgKzEsNCBAQFxuIOWOn+Wni+aWh+acrOWGheWuuVxuLeesrOS6jOihjOWOn+Wni+WGheWuuVxuK+esrOS6jOihjOS/ruaUueWQjueahOWGheWuuVxuK+aWsOWinueahOesrOWbm+ihjOWGheWuuVxuIOesrOS4ieihjOWOn+Wni+WGheWuuVxuJywNCiAgICAgICAgICAgIG9sZExpbmVzOiBbXSwNCiAgICAgICAgICAgIG5ld0xpbmVzOiBbXQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmxvYWREYXRhKCkNCiAgICAgICAgdGhpcy5wcm9jZXNzRGlmZigpDQoNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgYXN5bmMgbG9hZERhdGEoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KA0KICAgICAgICAgICAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDo5MjUxL2FwaS9tb2RpZmljYXRpb24vZ2V0RG9jQnlNb2RpZmljYXRpb25JZC82LzEwJywNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICB0aGlzLnBhdGNoVGV4dCA9IHJlc3BvbnNlLmRhdGEubW9kaWZpY2F0aW9uDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UyID0gYXdhaXQgYXhpb3MuZ2V0KA0KICAgICAgICAgICAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDo5MjUxL2FwaS9kb2NzLzYnLA0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgdGhpcy5vbGRUZXh0ID0gcmVzcG9uc2UyLmRhdGEudHh0DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UyKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Y6f5aeL6KGl5LiBOicsIHRoaXMucGF0Y2hUZXh0KQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfljp/lp4vmlofmnKwnLCB0aGlzLm9sZFRleHQpDQogICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hlcyA9IHRoaXMuZG1wLnBhdGNoX2Zyb21UZXh0KHRoaXMucGF0Y2hUZXh0KQ0KDQogICAgICAgICAgICAgICAgLy8g5bqU55So6KGl5LiB5bm26aqM6K+B57uT5p6cDQogICAgICAgICAgICAgICAgY29uc3QgW25ld1RleHQsIHJlc3VsdHNdID0gdGhpcy5kbXAucGF0Y2hfYXBwbHkocGF0Y2hlcywgdGhpcy5vbGRUZXh0KQ0KICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLnNvbWUoc3VjY2VzcyA9PiAhc3VjY2VzcykpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfpg6jliIbooaXkuIHlupTnlKjlpLHotKUnKQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflupTnlKjooaXkuIHlkI7nmoTmlrDmlofmnKw6JywgbmV3VGV4dCkNCg0KICAgICAgICAgICAgICAgIC8vIOeUn+aIkOagh+WHhuW3ruW8gg0KICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZzID0gdGhpcy5kbXAuZGlmZl9tYWluKHRoaXMub2xkVGV4dCwgbmV3VGV4dCkNCiAgICAgICAgICAgICAgICB0aGlzLmRtcC5kaWZmX2NsZWFudXBTZW1hbnRpYyhkaWZmcykgIC8vIOS8mOWMluW3ruW8guaYvuekug0KDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+agh+WHhuW3ruW8gjonLCAhQXJyYXkuaXNBcnJheShkaWZmcyksICFBcnJheS5pc0FycmF5KGRpZmZzKSB8fCBkaWZmcy5sZW5ndGggPCAyKQ0KICAgICAgICAgICAgICAgIC8vIOWkhOeQhuW3ruW8gue7k+aenA0KICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVMaW5lcyhkaWZmcykNCiAgICAgICAgICAgICAgICAvLyB0aGlzLnBhZ2luYXRpb24udG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWwgfHwgMDsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6K+35rGC5byC5bi4OicsIGVycm9yKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlbDmja7liqDovb3lpLHotKUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy8gYXN5bmMgcHJvY2Vzc0RpZmYoKSB7DQogICAgICAgIC8vICAgICB0cnkgew0KICAgICAgICAvLyAgICAgICAgIC8vIOino+aekOihpeS4gQ0KICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCfljp/lp4vooaXkuIE6JywgdGhpcy5wYXRjaFRleHQpDQogICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ+WOn+Wni+aWh+acrCcsIHRoaXMub2xkVGV4dCkNCiAgICAgICAgLy8gICAgICAgICBjb25zdCBwYXRjaGVzID0gdGhpcy5kbXAucGF0Y2hfZnJvbVRleHQodGhpcy5wYXRjaFRleHQpDQoNCiAgICAgICAgLy8gICAgICAgICAvLyDlupTnlKjooaXkuIHlubbpqozor4Hnu5PmnpwNCiAgICAgICAgLy8gICAgICAgICBjb25zdCBbbmV3VGV4dCwgcmVzdWx0c10gPSB0aGlzLmRtcC5wYXRjaF9hcHBseShwYXRjaGVzLCB0aGlzLm9sZFRleHQpDQogICAgICAgIC8vICAgICAgICAgaWYgKHJlc3VsdHMuc29tZShzdWNjZXNzID0+ICFzdWNjZXNzKSkgew0KICAgICAgICAvLyAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+mDqOWIhuihpeS4geW6lOeUqOWksei0pScpDQogICAgICAgIC8vICAgICAgICAgfQ0KDQogICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ+W6lOeUqOihpeS4geWQjueahOaWsOaWh+acrDonLCBuZXdUZXh0KQ0KDQogICAgICAgIC8vICAgICAgICAgLy8g55Sf5oiQ5qCH5YeG5beu5byCDQogICAgICAgIC8vICAgICAgICAgY29uc3QgZGlmZnMgPSB0aGlzLmRtcC5kaWZmX21haW4odGhpcy5vbGRUZXh0LCBuZXdUZXh0KQ0KICAgICAgICAvLyAgICAgICAgIHRoaXMuZG1wLmRpZmZfY2xlYW51cFNlbWFudGljKGRpZmZzKSAgLy8g5LyY5YyW5beu5byC5pi+56S6DQoNCiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygn5qCH5YeG5beu5byCOicsICFBcnJheS5pc0FycmF5KGRpZmZzKSwgIUFycmF5LmlzQXJyYXkoZGlmZnMpIHx8IGRpZmZzLmxlbmd0aCA8IDIpDQogICAgICAgIC8vICAgICAgICAgLy8g5aSE55CG5beu5byC57uT5p6cDQogICAgICAgIC8vICAgICAgICAgdGhpcy5nZW5lcmF0ZUxpbmVzKGRpZmZzKQ0KICAgICAgICAvLyAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmVycm9yKCflpITnkIblt67lvILlpLHotKU6JywgZXJyb3IpDQogICAgICAgIC8vICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg54mI5pys5a+55q+U5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCkNCiAgICAgICAgLy8gICAgIH0NCiAgICAgICAgLy8gfSwNCg0KICAgICAgICBnZW5lcmF0ZUxpbmVzKGRpZmZzKSB7DQogICAgICAgICAgICBsZXQgb2xkTGluZU51bSA9IDENCiAgICAgICAgICAgIGxldCBuZXdMaW5lTnVtID0gMQ0KICAgICAgICAgICAgY29uc3Qgb2xkTGluZXMgPSBbXQ0KICAgICAgICAgICAgY29uc3QgbmV3TGluZXMgPSBbXQ0KDQogICAgICAgICAgICBjb25zb2xlLmxvZyhkaWZmcykNCiAgICAgICAgICAgIC8vIOWuieWFqOmBjeWOhuW3ruW8gg0KICAgICAgICAgICAgZGlmZnMuZm9yRWFjaChkaWZmID0+IHsNCiAgICAgICAgICAgICAgICAvLyDmt7vliqDnsbvlnovmo4Dmn6UNCiAgICAgICAgICAgICAgICAvLyBpZiAoIUFycmF5LmlzQXJyYXkoZGlmZikgfHwgZGlmZi5sZW5ndGggPCAyKSANCiAgICAgICAgICAgICAgICAvLyB7DQogICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCfmnKrlronlhajpgJrov4fnsbvlnovmo4Dmn6UnLCBkaWZmKQ0KICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAvLyB9DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WuieWFqOmAmui/h+exu+Wei+ajgOafpScsIGRpZmZbMF0pDQoNCiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gZGlmZlswXQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkaWZmWzFdDQoNCg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflpITnkIblt67lvII6JywgY29udGVudCkNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5kbXAuRElGRl9ERUxFVEU6JywgdGhpcy5kbXAuRElGRl9ERUxFVEUpDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuZG1wLkRJRkZfSU5TRVJUOicsIHRoaXMuZG1wLkRJRkZfSU5TRVJUKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmRtcC5ESUZGX0VRVUFMOicsIHRoaXMuZG1wLkRJRkZfRVFVQUwpDQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwgIT09ICcnKQ0KDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WkhOeQhuW3ruW8gjonLCBsaW5lcykNCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgICAgICAgb2xkTGluZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGROdW06IG9sZExpbmVOdW0rKywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBuZXdMaW5lcy5wdXNoKHsgdHlwZTogJ2VtcHR5JyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCg0KICAgICAgICAgICAgICAgICAgICBjYXNlIC0xOg0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3TGluZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOdW06IG5ld0xpbmVOdW0rKywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWRkZWQnDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2xkTGluZXMucHVzaCh7IHR5cGU6ICdlbXB0eScgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQoNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogIC8vIERJRkZfRVFVQUwNCiAgICAgICAgICAgICAgICAgICAgICAgIG9sZExpbmVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkTnVtOiBvbGRMaW5lTnVtKyssDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NhbWUnDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3TGluZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOdW06IG5ld0xpbmVOdW0rKywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2FtZScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMub2xkTGluZXMgPSBvbGRMaW5lcw0KICAgICAgICAgICAgdGhpcy5uZXdMaW5lcyA9IG5ld0xpbmVzDQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["ModificationCompare.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModificationCompare.vue","sourceRoot":"src/views/studentweb/practice","sourcesContent":["<template>\r\n    <div class=\"diff-page\">\r\n        <!-- 旧版本 -->\r\n        <div class=\"diff-column\">\r\n            <div class=\"header\">旧版本</div>\r\n            <div v-for=\"(line, index) in oldLines\" :key=\"'old-' + index\" class=\"line\"\r\n                :class=\"{ 'deleted': line.type === 'removed' }\">\r\n                <span class=\"line-number\">{{ line.oldNum || ' ' }}</span>\r\n                <span class=\"content\">{{ line.content }}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 新版本 -->\r\n        <div class=\"diff-column\">\r\n            <div class=\"header\">新版本</div>\r\n            <div v-for=\"(line, index) in newLines\" :key=\"'new-' + index\" class=\"line\"\r\n                :class=\"{ 'added': line.type === 'added' }\">\r\n                <span class=\"line-number\">{{ line.newNum || ' ' }}</span>\r\n                <span class=\"content\">{{ line.content }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport { diff_match_patch } from '../../../api/diff_match_patch'\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            dmp: new diff_match_patch(),\r\n            oldText: '原始文本内容\\n第二行原始内容\\n第三行原始内容',\r\n            patchText: '@@ -1,3 +1,4 @@\\n 原始文本内容\\n-第二行原始内容\\n+第二行修改后的内容\\n+新增的第四行内容\\n 第三行原始内容\\n',\r\n            oldLines: [],\r\n            newLines: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.loadData()\r\n        this.processDiff()\r\n\r\n    },\r\n    methods: {\r\n        async loadData() {\r\n            try {\r\n                \r\n                const response = await axios.get(\r\n                    'http://localhost:9251/api/modification/getDocByModificationId/6/10',\r\n                );\r\n                console.log(response);\r\n                this.patchText = response.data.modification\r\n                const response2 = await axios.get(\r\n                    'http://localhost:9251/api/docs/6',\r\n                );\r\n                this.oldText = response2.data.txt\r\n                console.log(response2);\r\n                console.log('原始补丁:', this.patchText)\r\n                console.log('原始文本', this.oldText)\r\n                const patches = this.dmp.patch_fromText(this.patchText)\r\n\r\n                // 应用补丁并验证结果\r\n                const [newText, results] = this.dmp.patch_apply(patches, this.oldText)\r\n                if (results.some(success => !success)) {\r\n                    throw new Error('部分补丁应用失败')\r\n                }\r\n\r\n                console.log('应用补丁后的新文本:', newText)\r\n\r\n                // 生成标准差异\r\n                const diffs = this.dmp.diff_main(this.oldText, newText)\r\n                this.dmp.diff_cleanupSemantic(diffs)  // 优化差异显示\r\n\r\n                console.log('标准差异:', !Array.isArray(diffs), !Array.isArray(diffs) || diffs.length < 2)\r\n                // 处理差异结果\r\n                this.generateLines(diffs)\r\n                // this.pagination.total = response.data.data.total || 0;\r\n            } catch (error) {\r\n                console.error('请求异常:', error);\r\n                this.$message.error('数据加载失败');\r\n            }\r\n        },\r\n        // async processDiff() {\r\n        //     try {\r\n        //         // 解析补丁\r\n        //         console.log('原始补丁:', this.patchText)\r\n        //         console.log('原始文本', this.oldText)\r\n        //         const patches = this.dmp.patch_fromText(this.patchText)\r\n\r\n        //         // 应用补丁并验证结果\r\n        //         const [newText, results] = this.dmp.patch_apply(patches, this.oldText)\r\n        //         if (results.some(success => !success)) {\r\n        //             throw new Error('部分补丁应用失败')\r\n        //         }\r\n\r\n        //         console.log('应用补丁后的新文本:', newText)\r\n\r\n        //         // 生成标准差异\r\n        //         const diffs = this.dmp.diff_main(this.oldText, newText)\r\n        //         this.dmp.diff_cleanupSemantic(diffs)  // 优化差异显示\r\n\r\n        //         console.log('标准差异:', !Array.isArray(diffs), !Array.isArray(diffs) || diffs.length < 2)\r\n        //         // 处理差异结果\r\n        //         this.generateLines(diffs)\r\n        //     } catch (error) {\r\n        //         console.error('处理差异失败:', error)\r\n        //         this.$message.error(`版本对比失败: ${error.message}`)\r\n        //     }\r\n        // },\r\n\r\n        generateLines(diffs) {\r\n            let oldLineNum = 1\r\n            let newLineNum = 1\r\n            const oldLines = []\r\n            const newLines = []\r\n\r\n            console.log(diffs)\r\n            // 安全遍历差异\r\n            diffs.forEach(diff => {\r\n                // 添加类型检查\r\n                // if (!Array.isArray(diff) || diff.length < 2) \r\n                // {\r\n                //     console.log('未安全通过类型检查', diff)\r\n                //     return\r\n                // }\r\n                console.log('安全通过类型检查', diff[0])\r\n\r\n                const type = diff[0]\r\n                const content = diff[1]\r\n\r\n\r\n                console.log('处理差异:', content)\r\n                console.log('this.dmp.DIFF_DELETE:', this.dmp.DIFF_DELETE)\r\n                console.log('this.dmp.DIFF_INSERT:', this.dmp.DIFF_INSERT)\r\n                console.log('this.dmp.DIFF_EQUAL:', this.dmp.DIFF_EQUAL)\r\n                const lines = content.split('\\n').filter(l => l !== '')\r\n\r\n                console.log('处理差异:', lines)\r\n                switch (type) {\r\n                    case 1:\r\n                        oldLines.push({\r\n                            content: content,\r\n                            oldNum: oldLineNum++,\r\n                            type: 'removed'\r\n                        })\r\n                        newLines.push({ type: 'empty' })\r\n                        break\r\n\r\n                    case -1:\r\n                        newLines.push({\r\n                            content: content,\r\n                            newNum: newLineNum++,\r\n                            type: 'added'\r\n                        })\r\n                        oldLines.push({ type: 'empty' })\r\n                        break\r\n\r\n                    default:  // DIFF_EQUAL\r\n                        oldLines.push({\r\n                            content: content,\r\n                            oldNum: oldLineNum++,\r\n                            type: 'same'\r\n                        })\r\n                        newLines.push({\r\n                            content: content,\r\n                            newNum: newLineNum++,\r\n                            type: 'same'\r\n                        })\r\n                }\r\n            })\r\n            this.oldLines = oldLines\r\n            this.newLines = newLines\r\n        }\r\n    }\r\n}\r\n</script>\r\n  \r\n<style scoped>\r\n.diff-page {\r\n    display: flex;\r\n    gap: 20px;\r\n    padding: 20px;\r\n    font-family: monospace;\r\n}\r\n\r\n.diff-column {\r\n    flex: 1;\r\n    border: 1px solid #e1e4e8;\r\n    border-radius: 6px;\r\n}\r\n\r\n.header {\r\n    padding: 10px;\r\n    background: #f6f8fa;\r\n    border-bottom: 1px solid #e1e4e8;\r\n    font-weight: bold;\r\n}\r\n\r\n.line {\r\n    display: flex;\r\n    padding: 2px 10px;\r\n}\r\n\r\n.line-number {\r\n    min-width: 40px;\r\n    color: rgba(27, 31, 35, .3);\r\n    padding-right: 10px;\r\n    user-select: none;\r\n}\r\n\r\n.deleted {\r\n    background-color: #ffeef0;\r\n}\r\n\r\n.added {\r\n    background-color: #e6ffed;\r\n}\r\n\r\n.content {\r\n    white-space: pre-wrap;\r\n}\r\n</style>"]}]}