{"remainingRequest":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\student\\ThesisOnline.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\src\\views\\student\\ThesisOnline.vue","mtime":1746532144258},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1711182482575},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711182484313},{"path":"C:\\Users\\18133\\Desktop\\在线学习系统\\源码\\OnlineLearnVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1711182506214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KaW1wb3J0IGpzQ29va2llIGZyb20gJ2pzLWNvb2tpZSc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaG9tZXdvcmtEYXRhOiB7DQogICAgICAgIHRpdGxlOiAnJywNCiAgICAgICAgY29udGVudDogJycNCiAgICAgIH0sDQogICAgICBmaWxlTGlzdDogW10sDQogICAgICBpZkhhdmVUaGVzaXM6IGZhbHNlLCAvLyDmjqfliLborrrmlofpopjnm67pgInmi6npobXpnaLmmL7npLoNCiAgICAgIHRoZXNpc0xpc3Q6IFtdLCAvLyDlhajpg6jorrrmlofmlbDmja4NCiAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgcGFnZVNpemU6IDUsDQogICAgICB0aGVzaXNBbmRUZWFjaGVyOiBbXQ0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgcGFnaW5hdGVkVGhlc2VzKCkgew0KICAgICAgY29uc3Qgc3RhcnQgPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wYWdlU2l6ZTsNCiAgICAgIGNvbnN0IGVuZCA9IHRoaXMuY3VycmVudFBhZ2UgKiB0aGlzLnBhZ2VTaXplOw0KICAgICAgcmV0dXJuIHRoaXMudGhlc2lzTGlzdC5zbGljZShzdGFydCwgZW5kKTsNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5jaGVja1RoZXNpcygpOw0KICAgIGlmICghdGhpcy5pZkhhdmVUaGVzaXMpIHsNCiAgICAgIHRoaXMubG9hZFRoZXNpc0xpc3QoKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBjaGVja1RoZXNpcygpIHsNCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjkyNTEvYXBpL3N0dWR5L3RoZXNpcy9nZXRUaGVzaXNCeVN0dUlkLyIranNDb29raWUuZ2V0KCd1c2VySWQnKSkNCiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgaWYocmVzcG9uc2UuZGF0YS5yZXN1bHREYXRhKSB7DQogICAgICAgIHRoaXMuaWZIYXZlVGhlc2lzID0gdHJ1ZQ0KICAgICAgICB0aGlzLnRoZXNpc0FuZFRlYWNoZXIgPSByZXNwb25zZS5kYXRhLnJlc3VsdERhdGENCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGhlc2lzQW5kVGVhY2hlcikNCiAgICAgIHRoaXMuaG9tZXdvcmtEYXRhLnRpdGxlID0gdGhpcy50aGVzaXNBbmRUZWFjaGVyLnRpdGxlDQogICAgfSwNCiAgICAvLyDmj5DkuqTorrrmlofnlLPor7cNCiAgICBhc3luYyBjb25maXJtQXBwbHlUaGVzaXModGhlc2lzKSB7DQogICAgICBjb25zb2xlLmxvZyh0aGVzaXMpDQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCB0aGlzLiRjb25maXJtKA0KICAgICAgICAgIGDnoa7lrpropoHnlLPor7fpopjnm67jgIwke3RoZXNpcy50aXRsZX3jgI3lkJfvvJ9gLA0KICAgICAgICAgICfnoa7orqTnlLPor7cnLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICAvLyDlj5HpgIHnlLPor7for7fmsYINCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo5MjUxL2FwaS9zdHVkeS90aGVzaXMvYXBwbHknLHsNCiAgICAgICAgICB0aGVzaXNJZDogdGhlc2lzLmlkLA0KICAgICAgICAgIHN0dWRlbnRJZDoganNDb29raWUuZ2V0KCd1c2VySWQnKSwNCiAgICAgICAgICB0ZWFjaGVySWQ6IHRoZXNpcy50ZWFjaGVySWQNCiAgICAgICAgfSk7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlPT0yMDApIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+eUs+ivt+aIkOWKnycpOw0KICAgICAgICAgIC8vIOWPr+mAie+8muWIt+aWsOWIl+ihqOaIluemgeeUqOivpemimOebrg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubWVzc2FnZSB8fCAn55Sz6K+35aSx6LSlJyk7DQogICAgICAgIH0NCg0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGlmIChlcnIgIT09ICdjYW5jZWwnKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign55Sz6K+35bey5Y+W5raI5oiW5Y+R55Sf6ZSZ6K+vJyk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgZ29PdGhlcnMoKSB7DQogICAgICAvLyDkvaDnmoTov5Tlm57pgLvovpENCiAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygi6L+U5Zue5LiK5LiA6aG1Iik7DQogICAgfSwNCg0KICAgIGhhbmRsZVBhZ2VDaGFuZ2UocGFnZSkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7DQogICAgfSwNCg0KICAgIGFzeW5jIGxvYWRUaGVzaXNMaXN0KCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjkyNTEvYXBpL3N0dWR5L3RoZXNpcy9saXN0Jyk7IC8vIOWBh+iuvui/meaYr+iOt+WPluiuuuaWh+eahOaOpeWPow0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICB0aGlzLnRoZXNpc0xpc3QgPSByZXMuZGF0YS5yZXN1bHREYXRhLmRhdGEgfHwgW107DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veiuuuaWh+mimOebruWksei0pScpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBzZWxlY3RUaGVzaXModGhlc2lzKSB7DQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOW3sumAieaLqemimOebru+8miR7dGhlc2lzLnRpdGxlfWApOw0KICAgICAgLy8g6K6+572u6aKY55uu5YaF5a655Yiw57yW6L6R5Yy677yI5Y+v6YCJ77yJDQogICAgICB0aGlzLmhvbWV3b3JrRGF0YS50aXRsZSA9IHRoZXNpcy50aXRsZTsNCiAgICAgIHRoaXMuaG9tZXdvcmtEYXRhLmNvbnRlbnQgPSB0aGVzaXMuY29udGVudDsNCiAgICAgIHRoaXMuaWZIYXZlVGhlc2lzID0gZmFsc2U7DQogICAgfSwNCg0KICAgIGhhbmRsZUZpbGVDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIGNvbnN0IHZhbGlkVHlwZXMgPSBbJ2FwcGxpY2F0aW9uL21zd29yZCcsICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCddOw0KICAgICAgY29uc3QgaXNEb2MgPSB2YWxpZFR5cGVzLmluY2x1ZGVzKGZpbGUucmF3LnR5cGUpIHx8DQogICAgICAgIGZpbGUucmF3Lm5hbWUuZW5kc1dpdGgoJy5kb2MnKSB8fA0KICAgICAgICBmaWxlLnJhdy5uYW1lLmVuZHNXaXRoKCcuZG9jeCcpOw0KICAgICAgY29uc3QgaXNMdDUwMEtCID0gZmlsZS5yYXcuc2l6ZSAvIDEwMjQgPCA1MDA7DQoNCiAgICAgIGlmICghaXNEb2MpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygZG9jL2RvY3jmoLzlvI/mlofku7YnKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgaWYgKCFpc0x0NTAwS0IpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HNTAwS0InKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCg0KICAgIGhhbmRsZUZpbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsNCiAgICB9LA0KDQogICAgYXN5bmMgc3VibWl0KCkgew0KICAgICAgaWYgKCF0aGlzLmhvbWV3b3JrRGF0YS50aXRsZS50cmltKCkpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36L6T5YWl5qCH6aKYJyk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5ob21ld29ya0RhdGEuY29udGVudC50cmltKCkpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36L6T5YWl5YaF5a65Jyk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6nopoHkuIrkvKDnmoTmlofku7YnKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZm9ybURhdGEuYXBwZW5kKCd0aXRsZScsIHRoaXMuaG9tZXdvcmtEYXRhLnRpdGxlKTsNCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY29udGVudCcsIHRoaXMuaG9tZXdvcmtEYXRhLmNvbnRlbnQpOw0KICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VySWQnLCBqc0Nvb2tpZS5nZXQoJ3VzZXJJZCcpKTsNCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndGVhY2hlcklkJywgdGhpcy50aGVzaXNBbmRUZWFjaGVyLnRlYWNoZXJfaWQpOw0KICAgICAgdGhpcy5maWxlTGlzdC5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGVzJywgZmlsZS5yYXcpOw0KICAgICAgfSk7DQoNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo5MjUxL2FwaS9kb2NzL3VwbG9hZCcsIGZvcm1EYXRhLCB7DQogICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmj5DkuqTmiJDlip8nKTsNCiAgICAgICAgdGhpcy5ob21ld29ya0RhdGEgPSB7IHRpdGxlOiAnJywgY29udGVudDogJycgfTsNCiAgICAgICAgdGhpcy5maWxlTGlzdCA9IFtdOw0KICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZFJlZi5jbGVhckZpbGVzKCk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmj5DkuqTlpLHotKUnKTsNCiAgICAgICAgY29uc29sZS5lcnJvcign5LiK5Lyg6ZSZ6K+vOicsIGVycm9yKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["ThesisOnline.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThesisOnline.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 论文题目选择页面 -->\r\n    <div v-if=\"!ifHaveThesis\" style=\"padding: 20px;\">\r\n      <h3>请选择论文题目</h3>\r\n\r\n      <el-table :data=\"paginatedTheses\" style=\"width: 100%;\">\r\n        <el-table-column prop=\"title\" label=\"论文标题\" />\r\n        <el-table-column prop=\"content\" label=\"论文要求\" width=\"100\" />\r\n        <el-table-column prop=\"teacherName\" label=\"创建人\" width=\"120\" />\r\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\" />\r\n        <el-table-column label=\"操作\" width=\"120\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"confirmApplyThesis(scope.row)\">申请</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div style=\"text-align: right; margin-top: 20px;\">\r\n        <el-pagination background layout=\"prev, pager, next\" :total=\"thesisList.length\" :page-size=\"pageSize\"\r\n          :current-page=\"currentPage\" @current-change=\"handlePageChange\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 作业提交页面 -->\r\n    <div v-else style=\"padding: 20px;\">\r\n\r\n      <el-input v-model=\"homeworkData.title\" placeholder=\"请输入标题\" style=\"margin-bottom: 10px;\"></el-input>\r\n      <el-input v-model=\"homeworkData.content\" placeholder=\"请输入内容\" type=\"textarea\"\r\n        style=\"margin-bottom: 10px;\"></el-input>\r\n\r\n      <el-upload class=\"upload-demo\" drag :auto-upload=\"false\" :multiple=\"true\" :on-change=\"handleFileChange\"\r\n        :before-remove=\"handleFileRemove\" ref=\"uploadRef\">\r\n        <el-icon class=\"el-icon--upload\" ><upload-filled /></el-icon>\r\n        <div class=\"el-upload__text\" style=\"font-size: 20px;\">\r\n          将文件拖到此处或<em style=\"font-size: 20px;\">点击上传</em>\r\n        </div>\r\n        <template #tip>\r\n          <div class=\"el-upload__tip\" style=\"font-size: 20px;\">\r\n            仅支持doc/docx文件\r\n          </div>\r\n        </template>\r\n      </el-upload>\r\n      <el-button type=\"danger\" @click=\"goOthers()\">返回</el-button>\r\n      <el-button type=\"success\" @click=\"submit\">提交</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport jsCookie from 'js-cookie';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      homeworkData: {\r\n        title: '',\r\n        content: ''\r\n      },\r\n      fileList: [],\r\n      ifHaveThesis: false, // 控制论文题目选择页面显示\r\n      thesisList: [], // 全部论文数据\r\n      currentPage: 1,\r\n      pageSize: 5,\r\n      thesisAndTeacher: []\r\n    };\r\n  },\r\n  computed: {\r\n    paginatedTheses() {\r\n      const start = (this.currentPage - 1) * this.pageSize;\r\n      const end = this.currentPage * this.pageSize;\r\n      return this.thesisList.slice(start, end);\r\n    }\r\n  },\r\n  created() {\r\n    this.checkThesis();\r\n    if (!this.ifHaveThesis) {\r\n      this.loadThesisList();\r\n    }\r\n  },\r\n  methods: {\r\n    async checkThesis() {\r\n      const response = await axios.get(\"http://localhost:9251/api/study/thesis/getThesisByStuId/\"+jsCookie.get('userId'))\r\n      console.log(response)\r\n      if(response.data.resultData) {\r\n        this.ifHaveThesis = true\r\n        this.thesisAndTeacher = response.data.resultData\r\n      }\r\n      console.log(this.thesisAndTeacher)\r\n      this.homeworkData.title = this.thesisAndTeacher.title\r\n    },\r\n    // 提交论文申请\r\n    async confirmApplyThesis(thesis) {\r\n      console.log(thesis)\r\n      try {\r\n        await this.$confirm(\r\n          `确定要申请题目「${thesis.title}」吗？`,\r\n          '确认申请',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning',\r\n          }\r\n        );\r\n\r\n        // 发送申请请求\r\n        const res = await axios.post('http://localhost:9251/api/study/thesis/apply',{\r\n          thesisId: thesis.id,\r\n          studentId: jsCookie.get('userId'),\r\n          teacherId: thesis.teacherId\r\n        });\r\n        console.log(res);\r\n        if (res.data.code==200) {\r\n          this.$message.success('申请成功');\r\n          // 可选：刷新列表或禁用该题目\r\n        } else {\r\n          this.$message.error(res.data.message || '申请失败');\r\n        }\r\n\r\n      } catch (err) {\r\n        if (err !== 'cancel') {\r\n          this.$message.error('申请已取消或发生错误');\r\n        }\r\n      }\r\n    },\r\n\r\n    goOthers() {\r\n      // 你的返回逻辑\r\n      this.$message.info(\"返回上一页\");\r\n    },\r\n\r\n    handlePageChange(page) {\r\n      this.currentPage = page;\r\n    },\r\n\r\n    async loadThesisList() {\r\n      try {\r\n        const res = await axios.get('http://localhost:9251/api/study/thesis/list'); // 假设这是获取论文的接口\r\n        console.log(res);\r\n        this.thesisList = res.data.resultData.data || [];\r\n        console.log(res);\r\n      } catch (e) {\r\n        this.$message.error('加载论文题目失败');\r\n      }\r\n    },\r\n\r\n    selectThesis(thesis) {\r\n      this.$message.success(`已选择题目：${thesis.title}`);\r\n      // 设置题目内容到编辑区（可选）\r\n      this.homeworkData.title = thesis.title;\r\n      this.homeworkData.content = thesis.content;\r\n      this.ifHaveThesis = false;\r\n    },\r\n\r\n    handleFileChange(file, fileList) {\r\n      const validTypes = ['application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];\r\n      const isDoc = validTypes.includes(file.raw.type) ||\r\n        file.raw.name.endsWith('.doc') ||\r\n        file.raw.name.endsWith('.docx');\r\n      const isLt500KB = file.raw.size / 1024 < 500;\r\n\r\n      if (!isDoc) {\r\n        this.$message.error('只能上传doc/docx格式文件');\r\n        return false;\r\n      }\r\n      if (!isLt500KB) {\r\n        this.$message.error('文件大小不能超过500KB');\r\n        return false;\r\n      }\r\n\r\n      this.fileList = fileList;\r\n      return false;\r\n    },\r\n\r\n    handleFileRemove(file, fileList) {\r\n      this.fileList = fileList;\r\n    },\r\n\r\n    async submit() {\r\n      if (!this.homeworkData.title.trim()) {\r\n        this.$message.error('请输入标题');\r\n        return;\r\n      }\r\n      if (!this.homeworkData.content.trim()) {\r\n        this.$message.error('请输入内容');\r\n        return;\r\n      }\r\n      if (this.fileList.length === 0) {\r\n        this.$message.error('请选择要上传的文件');\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      formData.append('title', this.homeworkData.title);\r\n      formData.append('content', this.homeworkData.content);\r\n      formData.append('userId', jsCookie.get('userId'));\r\n      formData.append('teacherId', this.thesisAndTeacher.teacher_id);\r\n      this.fileList.forEach(file => {\r\n        formData.append('files', file.raw);\r\n      });\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:9251/api/docs/upload', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n\r\n        this.$message.success('提交成功');\r\n        this.homeworkData = { title: '', content: '' };\r\n        this.fileList = [];\r\n        this.$refs.uploadRef.clearFiles();\r\n      } catch (error) {\r\n        this.$message.error('提交失败');\r\n        console.error('上传错误:', error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.thesis-selection {\r\n  max-width: 800px;\r\n  margin: 20px auto;\r\n}\r\n\r\n.thesis-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.thesis-title {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n.thesis-meta {\r\n  display: flex;\r\n  gap: 15px;\r\n  align-items: center;\r\n  color: #666;\r\n  font-size: 12px;\r\n}\r\n\r\n.empty-tip {\r\n  text-align: center;\r\n  color: #999;\r\n  padding: 20px;\r\n}\r\n</style>"]}]}